\secrel{Стек данных}

Каждое выражение языка \bi\ после вычисления кладется на стек данных.

\begin{framed}
Стек\ --- структура данных, поддерживающая операции:

\bigskip
\begin{tabular}{l l l}
push(объект) & ( A B C -- A B C obj ) & поместить объект на вершину стека \\
pop()$\rightarrow$объект & ( A B C obj -- A B C ) & взять объект с вершины \\
стековые функции\ref{Ffn} && выполняют вычисления на стеке \\
\end{tabular}  
\end{framed}

Для записи состояния стека используется строчная \F-нотация: 
элементы записываются слева 
направо, вершина\ --- самый правый элемент. Для встроенных 
\F-функций\ref{Ffn}\ используется нотация вида\\ \verb|A B C -- A C B|, 
в левой части состояние стека
до выполнения функции, справа\ --- после того, как функция выполнила
\termdef{вычисления на стеке данных}. 

\bigskip
\begin{tabular}{l l}
? & вывести стек (вершина внизу) \\
\textasciitilde & очистить стек \\
\end{tabular}
\bigskip

Команда ?\ выводит стек в полной текстовой форме в виде дерева, для составных
объектов включаются все вложенные элементы. Стек выводится сверху вниз, вершина
стека\ --- самый нижний элемент.

\bigskip
При вполнении примера \ref{nestdata}\ будет выведено (список списков чисел,
строка и символ):
\begin{verbatim}
========= stack ==========
<[:]>
    <[:],doc:<str:'integers'>>
        <int:-1>
        <int:0>
        <int:0>
        <int:0>
        <int:2222>
    <[:],doc:<str:'machine numbers'>>
        <hex:0x12AF>
        <bin:0b1101>
    <[:],doc:<str:'float numerics'>>
        <num:2.3>
        <num:-400000>
<str:'string'>
<sym:symbol,doc:<str:'generic symbol'>>
==========================

========= stack ==========
==========================
\end{verbatim}

0ой элемент = вершина стека\ --- символ;

-1ый элемент строка;

-2ой элемент = дно стека\ --- вложенный список чисел разных типов.

